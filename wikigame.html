<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Wikipedia Game</title>
</head>
<body>
    <script>
    let xhttp = new XMLHttpRequest();
    function setCharAt(str,index,chr) {
        if(index > str.length-1) return str;
        return str.substring(0,index) + chr + str.substring(index+1);
    }
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var page = xhttp.response;
            var excerpt = page["extract_html"];
            var indices = [];
            document.getElementById("title").innerHTML = page["title"];
            var wordarray = excerpt.split(" ");
            for (i = 0; i < 4; i++) {
                var index = wordarray[Math.floor(Math.random()*wordarray.length)];
                index = wordarray.indexOf(index);
                wordarray[index] = "_".repeat(wordarray[index].length)
                excerpt = wordarray.join(" ");
            }
            document.getElementById("paragraph").innerHTML = excerpt;
            
        }
    };
    url = "https://en.wikipedia.org/api/rest_v1/page/random/summary";
    xhttp.open("GET", url, true);
    xhttp.responseType = 'json';
    xhttp.send();
    </script>
    <h1 id="title"></h1>
    <p id="paragraph"></p>
</body>
</html>
